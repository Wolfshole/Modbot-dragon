---
import Layout from '../layouts/Layout.astro';
import '../styles/dashboard.css';
import { getBotInviteUrl } from '../config/discord.js';

const botInviteUrl = getBotInviteUrl();
---

<Layout title="Dashboard - Dragon Modbot" description="Konfiguriere deinen Discord Moderations-Bot">
	<main>
		<nav class="navbar">
			<div class="container">
				<a href="/" class="logo">üõ°Ô∏è Dragon Modbot</a>
				<div class="nav-links">
					<a href="/">Home</a>
					<a href="/dashboard" class="active">Dashboard</a>
				</div>
				<div class="user-info" id="user-info">
					<span id="username">Lade...</span>
				</div>
			</div>
		</nav>

		<div class="dashboard-container">
			<aside class="sidebar">
				<div class="sidebar-header">
					<img src="/dragon-logo.png" alt="Dragon Network" class="header-logo" />
					<h2>Dragon Modbot</h2>
				</div>
				<div class="sidebar-menu">
					<a href="#" class="menu-item active">
						<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
							<path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
						</svg>
						Home
					</a>
					<a href="#" class="menu-item">
						<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
							<path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
						</svg>
						Moderation
					</a>
					<a href="#" class="menu-item">
						<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
							<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
						</svg>
						AutoMod
					</a>
				</div>
			</aside>

			<section class="main-content">
				<div class="content-wrapper">
					<div class="welcome-header">
						<h1>Hallo <span id="greeting-username">ueblackwulf</span></h1>
					</div>

					<div id="server-grid" class="server-grid">
						<!-- Server werden dynamisch geladen -->
						<p class="loading">Lade deine Server...</p>
					</div>

					<div class="status-section">
						<h2>Status</h2>
						<div class="status-grid">
							<div class="status-card">
								<div class="status-indicator online"></div>
								<div class="status-info">
									<h3>Website</h3>
									<p class="status-label">ONLINE</p>
								</div>
							</div>
							<div class="status-card">
								<div class="status-indicator online"></div>
								<div class="status-info">
									<h3>Dashboard</h3>
									<p class="status-label">ONLINE</p>
								</div>
							</div>
							<div class="status-card">
								<div class="status-indicator online"></div>
								<div class="status-info">
									<h3>Team-Dashboard</h3>
									<p class="status-label">ONLINE</p>
								</div>
							</div>
							<a href="#" class="status-card info-card">
								<div class="status-indicator info">‚Ñπ</div>
								<div class="status-info">
									<h3>Status Informationen</h3>
									<p class="status-label"></p>
								</div>
							</a>
						</div>
					</div>

					<div id="config-panel" class="config-panel" style="display: none;">
						<div class="server-header">
							<h2 id="server-name">Server: ...</h2>
							<p class="server-subtitle">Konfiguriere die Commands f√ºr deinen Server</p>
						</div>
						
						<div class="config-section">
							<h3>üìù Verf√ºgbare Moderations-Commands</h3>
							<p class="section-info">Aktiviere oder deaktiviere Commands und passe ihre Einstellungen an</p>
							<div class="command-list">
								<div class="command-item">
									<div class="command-header">
										<span class="command-name">/ban</span>
										<label class="toggle">
											<input type="checkbox" checked data-command="ban">
											<span class="slider"></span>
										</label>
									</div>
									<p class="command-description">Verbannt einen Benutzer dauerhaft vom Server</p>
									<div class="command-options">
										<label>
											<input type="checkbox" checked data-command-option="ban-delete-messages">
											Nachrichten des Benutzers l√∂schen (letzte 7 Tage)
										</label>
										<label>
											Begr√ºndung erforderlich:
											<select data-command-option="ban-require-reason">
												<option value="yes" selected>Ja</option>
												<option value="no">Nein</option>
											</select>
										</label>
									</div>
								</div>

								<div class="command-item">
									<div class="command-header">
										<span class="command-name">/kick</span>
										<label class="toggle">
											<input type="checkbox" checked data-command="kick">
											<span class="slider"></span>
										</label>
									</div>
									<p class="command-description">Wirft einen Benutzer vom Server (kann wieder beitreten)</p>
									<div class="command-options">
										<label>
											Begr√ºndung erforderlich:
											<select data-command-option="kick-require-reason">
												<option value="yes" selected>Ja</option>
												<option value="no">Nein</option>
											</select>
										</label>
									</div>
								</div>

								<div class="command-item">
									<div class="command-header">
										<span class="command-name">/mute</span>
										<label class="toggle">
											<input type="checkbox" checked data-command="mute">
											<span class="slider"></span>
										</label>
									</div>
									<p class="command-description">Stummschaltet einen Benutzer tempor√§r (Timeout)</p>
									<div class="command-options">
										<label>
											Standard-Dauer:
											<select data-command-option="mute-default-duration">
												<option value="5m">5 Minuten</option>
												<option value="10m">10 Minuten</option>
												<option value="30m">30 Minuten</option>
												<option value="1h" selected>1 Stunde</option>
												<option value="24h">24 Stunden</option>
											</select>
										</label>
										<label>
											Max. Dauer:
											<select data-command-option="mute-max-duration">
												<option value="1h">1 Stunde</option>
												<option value="24h">24 Stunden</option>
												<option value="7d" selected>7 Tage</option>
												<option value="28d">28 Tage</option>
											</select>
										</label>
										<label>
											Begr√ºndung erforderlich:
											<select data-command-option="mute-require-reason">
												<option value="yes" selected>Ja</option>
												<option value="no">Nein</option>
											</select>
										</label>
									</div>
								</div>

								<div class="command-item">
									<div class="command-header">
										<span class="command-name">/warn</span>
										<label class="toggle">
											<input type="checkbox" checked data-command="warn">
											<span class="slider"></span>
										</label>
									</div>
									<p class="command-description">Verwarnt einen Benutzer offiziell</p>
									<div class="command-options">
										<label>
											Verwarnungen vor Auto-Ban:
											<input type="number" value="3" min="1" max="10" data-command-option="warn-autoban-count">
										</label>
										<label>
											<input type="checkbox" data-command-option="warn-enable-autoban">
											Auto-Ban bei Erreichen aktivieren
										</label>
										<label>
											Begr√ºndung erforderlich:
											<select data-command-option="warn-require-reason">
												<option value="yes" selected>Ja</option>
												<option value="no">Nein</option>
											</select>
										</label>
									</div>
								</div>
							</div>
						</div>

						<div class="config-section">
							<h3>üìä Logging & Benachrichtigungen</h3>
							<p class="section-info">W√§hle einen Kanal f√ºr Moderations-Protokolle</p>
							<div class="command-list">
								<div class="command-item">
									<div class="command-header">
										<span class="command-name">Mod-Log Kanal</span>
									</div>
									<p class="command-description">Kanal f√ºr alle Moderations-Aktionen (Ban, Kick, Mute, Warn)</p>
									<div class="command-options">
										<label>
											Kanal:
											<select id="modlog-channel" data-command-option="modlog-channel">
												<option value="">-- Kanal w√§hlen --</option>
											</select>
										</label>
										<label>
											<input type="checkbox" checked data-command-option="modlog-include-moderator">
											Moderator-Name im Log anzeigen
										</label>
										<label>
											<input type="checkbox" checked data-command-option="modlog-include-timestamp">
											Zeitstempel im Log anzeigen
										</label>
									</div>
								</div>
							</div>
						</div>

						<div class="save-section">
							<button id="save-config" class="btn btn-primary btn-large">üíæ Konfiguration speichern</button>
							<p id="save-status" class="save-status"></p>
						</div>
					</div>
				</div>
			</section>
		</div>
	</main>
</Layout>

<script src="../scripts/dashboard.js"></script>

